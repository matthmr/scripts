#!/usr/bin/sh

case ${0##*/} in
		'emacstc')
			EMACSOPTS=-t
			EMACSALTOPTS=-nw;;
		*)
			EMACSOPTS=-c
			EMACSALTOPTS=;;
esac

if [[ -z $XDG_RUNTIME_DIR ]]; then
  BASE="$XDG_RUNTIME_DIR/emacs"
else
  BASE="/tmp/emacs-$UID"
fi

exec emacsclient $EMACSOPTS -s \
     "$BASE/server" ${@:1} \
     -a "emacs $EMACSALTOPTS ${@:1}"
